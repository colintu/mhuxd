#
# mhuxd configuration file
# 
# adjust at least the serial settings for you radio(s) in the <Radio> section(s)

<Daemon>
  PidFile            /var/run/mhuxd/mhuxd.pid

  Device              *    # Specify device by file (e.g. /dev/ttyUSBB0)
                           # or by serial number (e.g. D2UL5TZ3, see --list-dev option)
                           # or just '*' if you have just a single microHam
                           # keyer connected anyway.

  DeviceTimeout	      700  # Read timeout when reading from keyer in ms.
  DeviceRetry         on   # Try re-connecting a disconnected keyer.
  KeepAliveInterval   5000 # Keep alive interval in ms (must be larger
                           # than DeviceTimeout)
  DevDir             mhuxd # Subdirectory in /dev/ where virtual serial ports
                           # are created.
  LogLevel           INFO  # MUTE, CRIT, ERROR, WARN, INFO, DEBUG0, DEBUG1
                           # this always overrides the -l command line switch

</Daemon>


###############################################################################
# Configuration for the first radio (if you don't have a MK2R(+) or u2R then
# there is only one radio).

<Radio 1>
  VspEnabled            on  # Create virtual serial port /dev/mhuxd/cat1
  VspRtsIsPtt           off # Use RTS on /dev/mhuxd/cat1 as PTT
  VspDtrIsPtt           off # Use DTR on /dev/mhuxd/cat1 as PTT

  VspPttEnabled         on  # Create virtual serial port /dev/mhuxd/ptt1
  VspPttRtsIsPtt        on  # Use RTS on /dev/mhuxd/ptt1 as PTT
  VspPttDtrIsPtt        off # Use DTR on /dev/mhuxd/ptt1 as PTT

  # Serial settings of the connected radio.
  BaudRate             9600
  DataBits             8
  StopBits             1
  RtsCts               off


  # The rest of the <Radio *> section is relevant for MK2,DK2,MK2R(+) only.
  

  # Which radio is connected here. Check 'mhuxd --list-radios' for valid codes.
  RadioType			0x49

  # CI-V radio address if rig is an Icom. Otherwise specify in hexadecimal (e.g. 0x66).
  # Check mhuxd --list-radios for default CI-V addresses of various Icom rigs.
  IcomAddress			0x66

  # Enable this if you have a Icom PW1 connected via CI-V
  IcomPW1Connected		off

  # How keyer determines the current mode VOICE or DIGITAL.
  #  0 = According to band map
  #  1 = always VOICE
  #  2 = always DIGITAL
  DigitalOverVoice		1

  # 
  UseDecoderIfConnected		on
  DontInterfereUSBControl	off
</Radio>

<Fsk 1>
  VspEnabled            on  # Create virtual serial port /dev/mhuxd/fsk1
  VspRtsIsPtt           off # Use RTS on /dev/mhuxd/fsk1 as PTT
  VspDtrIsPtt           off # Use DTR on /dev/mhuxd/fsk1 as PTT

  # Serial settings for FSK
  BaudRate             45.5
  DataBits             5
  StopBits             1.5
</Fsk>

<Winkey>
  VspEnabled            on  # Create virtual serial port /dev/mhuxd/wk1
  VspRtsIsPtt           off # Use RTS on /dev/mhuxd/wk1 as PTT
  VspDtrIsPtt           off # Use DTR on /dev/mhuxd/wk1 as PTT
</Winkey>

###############################################################################
# Keyer configuration options. mhuxd will re-read this section when it receives
# a SIGHUP ('kill -HUP [mhuxd-PID]').

<Keyer>
  ### FSK options #######
  fskDiddle         on
  fskUos            on
  r1InvertFsk       on


  ### Footswitch Options ########

  restoreCompCw        on  # restore computer CW after foot switch is released
  restoreCompFsk       on  # restore computer FSK after foot switch is released
  restorePtt           on  # restore PTT and audio switching after foot switch is released
  muteCompCw           off # mute computer CW during foot switch is pressed
  muteCompFsk          off # mute computer FSK during foot switch is pressed
  downstreamOverFootSw off # audio stream from sound card will switch audio from microphone to sound card
                           # output even if foot switch is pressed

  ### PTT Options ###############

  r1PttDelay           1   # PTT delay in 10ms units
  r1Qsk                off # in CW mode generate PA PTT and LNA PTT according
                           # to CW instead of PTT source (except U2R)

  r1LnaPtt             on  # generate LNA PTT (except U2R)
  r1PaPtt              on  # generate PA PTT (ignored on MK when r1LnaPtt is
                           # set, it has shared PA/LNA output) (except U2R)

  r1PaPttTail          0   # PA tail after PTT drops in 10ms units (MK2, DK2, MK2R family only)
  r1LnaPttTail         0   # LNA tail after PTT drops in 10ms units
  r1InvertLnaPtt       off # invert LNA PTT polarity (MK2, DK2, MK2R family only)
  r1TrDelay            0   # T/R delay in ms (except MK family) (???)

  ### Mode Options ##############

  r1ForceKeyerMode     on  # suppress manual switching of keyer mode and force
                           # it from r1KeyerMode (MK2 and MK2R family can
                           # force keyer mode according to CAT decoding, see
                           # r1FollowTxMode)

  r1FollowTxMode       on  # force keyer mode according to CAT decoding,
                           # r1ForceKeyerMode must be set (MK2, DK2, MK2R families only)

  r1AllowCwInVoice     off # allow CW output in VOICE mode (MK2, MK2R family only)
  r1KeyerMode          0   # forced keyer mode, r1ForceKeyerMode must be set and on device from MK2 or MK2R
                           # family r1FollowTxMode must be cleared (0=CW, 1=VOICE, 2=FSK, 3=DIGITAL)

  ### Keyboard Options ##########

  speedStep            1   # step used by num pad keys '+' and '-' when they controls WPM
  fskTypeAhead         off # type ahead in FSK mode
  cwTypeAhead          off # type ahead in CW mode
  qwertz               on  # QWERTZ keyboard layout

  ### Contest Number Options ####

  numLeadZeroT         off # substitute leading zeros in serial number by T
  numZeroT             off # substitute zeros in serial number by T
  numOneA              off # substitute ones in serial number by A
  numNineN             off # substitute nines in serial number by N
  numReport5NN         off # prepend report 5NN to serial number


  ### Misc Options ##############
  r1I2cCoupled         off # keyer is coupled with Station Master (MK2, MK2R family only)
  r1ImmediateCw        off # generate CW immediately after paddle is hit (MK2, DK2, MK2R family only)
  sideTone             0   # side tone period in 1/1350 s (0=off, 1=1350Hz,
                           # 2=675Hz, 3=450Hz , 4=338Hz) (except U2R)

  r1LineOutRight       off # use right LINE OUT channel instead of left (MK2R family only)
  r1FrBase_Cw          AAA01 # Audio switching and PTT settings used in CW mode by
                             # MK2 and MK2R family, ignored by MK family.

  r1FrBase_Voice       DDD10 # Audio switching and PTT settings used in VOICE mode by MK2 and MK2R family, ignored by MK family.

  ### DK2 specific ##############
  #useAutoPtt          off # automatically generate PTT when audio downstream is active in VOICE or DIGITAL mode
  #paddleOnlySideTone  off # generate side tone only from paddle

  #usePFsk             off # use right audio channel as FSK source (Pseudo-FSK)
  #useQCw              off # use right audio channel as FSK source

</Keyer>
